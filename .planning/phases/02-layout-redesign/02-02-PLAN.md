---
phase: 02-layout-redesign
type: execute
---

<objective>
Users/view.ctp (Uebungsfirma-Detailansicht) im Card-Layout gestalten.

Purpose: Einzelne Uebungsfirma als Dashboard darstellen
Output: Card-basierte Detailansicht mit Konto-Info und Quick-Actions
</objective>

<context>
@.planning/BRIEF.md
@.planning/ROADMAP.md
@src/Template/Users/view.ctp
@src/Template/Accounts/view.ctp (Ziel-Design)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Layout-Struktur mit 2 Spalten</name>
  <files>src/Template/Users/view.ctp</files>
  <action>
  Grundstruktur analog zu Accounts/view.ctp:

  <div class="welcome-section">
      <h1 class="welcome-title"><?= h($user->name) ?></h1>
      <p class="welcome-date">
          <i class="bi bi-building me-1"></i>Uebungsfirma
      </p>
  </div>

  <div class="row g-4">
      <div class="col-lg-4">
          <!-- Linke Spalte: Firmendaten + Quick-Actions -->
      </div>
      <div class="col-lg-8">
          <!-- Rechte Spalte: Konten-Liste -->
      </div>
  </div>
  </action>
  <verify>2-Spalten-Layout vorhanden</verify>
  <done>Welcome-Section + Row mit col-lg-4/col-lg-8</done>
</task>

<task type="auto">
  <name>Task 2: Firmendaten-Card (linke Spalte)</name>
  <files>src/Template/Users/view.ctp</files>
  <action>
  In col-lg-4:

  <div class="card mb-4">
      <div class="card-header bg-primary text-white">
          <h5 class="mb-0"><i class="bi bi-building me-2"></i>Firmendaten</h5>
      </div>
      <div class="card-body">
          <div class="mb-3">
              <div class="text-muted small">Firmenname</div>
              <div class="fw-bold"><?= h($user->name) ?></div>
          </div>
          <div class="mb-3">
              <div class="text-muted small">Benutzername</div>
              <code><?= h($user->username) ?></code>
          </div>
          <div class="mb-3">
              <div class="text-muted small">Status</div>
              <span class="badge <?= $user->active ? 'bg-success' : 'bg-secondary' ?>">
                  <?= $user->active ? 'Aktiv' : 'Inaktiv' ?>
              </span>
          </div>
          <div>
              <div class="text-muted small">Erstellt am</div>
              <div><?= $user->created->format('d.m.Y H:i') ?></div>
          </div>
      </div>
  </div>
  </action>
  <verify>Firmendaten-Card zeigt Name, Username, Status, Datum</verify>
  <done>Card mit allen Firmendaten</done>
</task>

<task type="auto">
  <name>Task 3: Konten-Cards (rechte Spalte)</name>
  <files>src/Template/Users/view.ctp</files>
  <action>
  In col-lg-8 - jedes Konto als eigene Card:

  <h5 class="mb-3"><i class="bi bi-wallet2 me-2"></i>Konten</h5>

  <?php if (!empty($user->accounts)): ?>
      <?php foreach ($user->accounts as $account): ?>
      <div class="card mb-3">
          <div class="card-body">
              <div class="d-flex justify-content-between align-items-start">
                  <div>
                      <h6 class="mb-1"><?= h($account->name) ?></h6>
                      <div class="font-monospace small text-muted"><?= h($account->iban) ?></div>
                  </div>
                  <div class="text-end">
                      <div class="fs-5 fw-bold <?= $account->balance >= 0 ? 'text-success' : 'text-danger' ?>">
                          <?= $this->Number->currency($account->balance, 'EUR') ?>
                      </div>
                      <a href="<?= $this->Url->build(['controller' => 'Accounts', 'action' => 'view', $account->id]) ?>" class="btn btn-sm btn-outline-primary mt-2">
                          <i class="bi bi-eye me-1"></i>Details
                      </a>
                  </div>
              </div>
          </div>
      </div>
      <?php endforeach; ?>
  <?php else: ?>
      <div class="text-center text-muted py-4">
          <i class="bi bi-wallet2 display-4"></i>
          <p class="mt-2">Keine Konten vorhanden</p>
      </div>
  <?php endif; ?>
  </action>
  <verify>Konten werden als Cards dargestellt</verify>
  <done>Jedes Konto als Card mit IBAN, Saldo, Details-Button</done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] Welcome-Section mit Firmenname
- [ ] 2-Spalten-Layout (lg-4/lg-8)
- [ ] Firmendaten-Card links
- [ ] Konten als Cards rechts
- [ ] php -l ohne Fehler
</verification>

<success_criteria>
- Dashboard-Stil wie Schueler-Ansicht
- Alle Firmendaten sichtbar
- Konten mit Saldo und Link
</success_criteria>

<output>
Nach Abschluss: `.planning/phases/02-layout-redesign/02-02-SUMMARY.md` erstellen
</output>
